<script type="text/javascript">
  (async () => {
    try {
      let devices = await Homey.emit('add_device', {});
      for (let i in devices) {
        Homey.createDevice(devices[i]);
      }
      setTimeout(() => { Homey.done(); }, 5000);
    } catch (error) {
      await Homey.alert(error);
      Homey.done()
    }
  });
</script>
